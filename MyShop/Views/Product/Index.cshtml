@using Domain.Entities
@using MyShop.Models
@model IEnumerable<Product>

@{
    ViewData["Title"] = "Index";
    Pager pager = new Pager();
    int pageNo = 0;
    if (ViewBag.Pager != null)
    {
        pager = ViewBag.Pager;
        pageNo = pager.CurrentPage;
    }
}

<h2>Product All</h2>

<div class="row">
    <a asp-action="Create" class="col-2 btn btn-success" style="font-size:10px">Create New</a>

    <form class="col-10 d-flex" role="search">
        <input class="form-control me-2" name="text" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success" asp-action="Search" asp-controller="Product" type="submit">Search</button>
    </form>
</div>
<br />
<br />

<table class="table">
    
    <div class="row row-cols-1 row-cols-md-3 g-4 justify-content-center">
        @foreach (var product in Model)
        {
            var path = "/media/videos/" +  product.VideoPath;

            <div class="card mx-2" style="width: 18rem;">
                <video  controls>
                    <source src=@path type="video/mp4">
                    <source src="movie.ogg" type="video/ogg">
                    Your browser does not support the video tag.
                </video>

                <div class="card-body">
                    <h5 class="card-title">@product.Name </h5>
                    
                </div>
                
                    <div class="card-body">
                        
                            <a href="@Url.Action("Deleted", new { id = product.Id })" class="btn btn-danger">Delete</a>
                            <a href="@Url.Action("Update", new { id = product.Id })" class="btn btn-secondary">Update</a>
                        
                    </div>
                
            </div>
        }
    </div>

</table>


<div class="container" style="font-size:10px">
    @if (pager.TotalPages > 0)
    {
        <ul class="pagination justify-content-end">


            @if (pager.CurrentPage > 1)
            {
                <li class="page-item">
                    <a class="page-link" asp-controller="Product" asp-action="Index"
                       asp-route-pg="1">First</a>
                </li>
                <li>
                    <a class="page-link" asp-controller="Product" asp-action="Index"
                       asp-route-pg="@(pager.CurrentPage-1)">Previous</a>
                </li>
            }

            @for (var pge = pager.StartPage; pge < pager.EndPage; pge++)
            {
                <li class="page-item @(pge == pager.CurrentPage ? "active" :"")">
                    <a class="page-link" asp-controller="Product" asp-action="Index"
                       asp-route-pg="@pge">
                        @pge
                    </a>
                </li>
            }
            @if (pager.CurrentPage < pager.TotalPages)
            {
                <li class="page-item">
                    <a class="page-link" asp-controller="Product" asp-action="Index"
                       asp-route-pg="@(pager.CurrentPage+1)">Next</a>
                </li>
                <li>
                    <a class="page-link" asp-controller="Product" asp-action="Index"
                       asp-route-pg="@(pager.TotalPages)">Last</a>
                </li>
            }

        </ul>
    }

</div>

<style>
    .bold {
        font-weight: bold;
        font-size: 15px
    }
</style>